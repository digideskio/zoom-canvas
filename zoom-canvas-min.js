require=function(t,i,n){function s(n,r){if(!i[n]){if(!t[n]){var o="function"==typeof require&&require;if(!r&&o)return o(n,!0);if(e)return e(n,!0);throw new Error("Cannot find module '"+n+"'")}var h=i[n]={exports:{}};t[n][0].call(h.exports,function(i){var e=t[n][1][i];return s(e?e:i)},h,h.exports)}return i[n].exports}for(var e="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({zoomCanvas:[function(t,i){i.exports=t("s4nl1i")},{}],s4nl1i:[function(t,i,n){!function(){n.zoomCanvas=t("./zoom-canvas.iced").zoomCanvas,n.ezCanvas=t("./ez-canvas.iced").ezCanvas}.call(this)},{"./zoom-canvas.iced":1,"./ez-canvas.iced":2}],2:[function(t,i,n){!function(){var i,s,e,r,o;o=t("./zoom-canvas.iced").zoomCanvas,e=t("./rect.iced").rect,r=t("./vec.iced").vec,s={LINE:10},i=function(){function t(t){this.zc=new o(t),this.bounds=null,this.canvas=t.canvas,this.queue=[],this.ctx=this.canvas.getContext("2d")}return t.prototype.line=function(t){return this.queue.push([s.LINE,t])},t.prototype.clear=function(){return this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.bounds=null,this.queue=[]},t.prototype.paint=function(){var t,i,n,s;for(this.recalc_bounds(),this.zc.setObjectBounds(this.bounds.ll.x,this.bounds.ll.y,this.bounds.ur.x,this.bounds.ur.y),this.zc.step(Date.now()),s=this.queue,i=0,n=s.length;n>i;i++)t=s[i],this.paint_queued_item(t);return this.queue=[]},t.prototype.paint_queued_item=function(t){var i,n;switch(n=t[0],i=t[1],n){case s.LINE:return this.paint_queued_line(i);default:throw new Error("Dunno how to draw "+n)}},t.prototype.paint_queued_line=function(t){return this.ctx.beginPath(),this.ctx.save(),this.zc.applyToCtx(this.ctx),null!=t.thickness&&(this.ctx.lineWidth=t.thickness),this.ctx.moveTo(t.start[0],t.start[1]),this.ctx.lineTo(t.end[0],t.end[1]),this.ctx.stroke(),this.ctx.restore()},t.prototype.recalc_bounds=function(){var t,i;return i=function(){var i,n,s,e;for(s=this.queue,e=[],i=0,n=s.length;n>i;i++)t=s[i],e.push(this.get_q_bounds(t));return e}.call(this),null!=this.bounds&&i.push(this.bounds),this.bounds=e.bounding_rects(i)},t.prototype.get_q_bounds=function(t){var i,n;switch(n=t[0],i=t[1],n){case s.LINE:return e.bounding_vecs([new r(i.start[0],i.start[1]),new r(i.end[0],i.end[1])]);default:throw new Error("Unknown q type: "+n)}},t}(),n.ezCanvas=i}.call(this)},{"./zoom-canvas.iced":1,"./rect.iced":3,"./vec.iced":4}],4:[function(t,i,n){!function(){var t;t=function(){function t(t,i){this.x=t,this.y=i}return t.prototype.zero=function(){return this.x=this.y=0},t.prototype.copy=function(){return new t(this.x,this.y)},t}(),n.vec=t}.call(this)},{}],3:[function(t,i,n){!function(){var i,s;s=t("./vec.iced").vec,i=function(){function t(t,i){this.ll=t||new s(0,0),this.ur=i||new s(0,0)}return t.prototype.copy=function(){var i;return i=new t(this.ll.copy(),this.ur.copy())},t.bounding_vecs=function(i){var n,s,e,r,o;for(s=new t,n=r=0,o=i.length;o>r;n=++r)e=i[n],(0===n||e.x<s.ll.x)&&(s.ll.x=e.x),(0===n||e.x>s.ur.x)&&(s.ur.x=e.x),(0===n||e.y<s.ll.y)&&(s.ll.y=e.y),(0===n||e.y>s.ur.x)&&(s.ur.y=e.y);return s},t.bounding_rects=function(i){var n,s,e,r,o;if(i.length){for(s=i[0].copy(),o=i.slice(1),e=0,r=o.length;r>e;e++)n=o[e],n.ll.x<s.ll.x&&(s.ll.x=n.ll.x),n.ur.x>s.ur.x&&(s.ur.x=n.ur.x),n.ll.y<s.ll.y&&(s.ll.y=n.ll.y),n.ur.y>s.ur.y&&(s.ur.y=n.ur.y);return s}return new t},t}(),n.rect=i}.call(this)},{"./vec.iced":4}],1:[function(t,i,n){!function(){var i,s,e,r;e=t("./vec.iced").vec,s=t("./rect.iced").rect,i=t("affine").affine,r=function(){function t(t){if(t=t||{},!(t.canvas||t.canvas_width&&t.canvas_height))throw new Error("zoomCanvas expects either a canvas or a canvas_width, canvas_height");this.canvas=t.canvas||null,this.width=t.canvas_width||this.canvas.width,this.height=t.canvas_height||this.canvas.height,this.step_dt=null!=t.step_dt_ms?t.step_dt_ms/1e3:.01,this.fill=t.fill||1,this.spring_k=null!=t.spring_k?t.spring_k:1,this.spring_damp=null!=t.spring_damp?t.spring_damp:1,this.drawScale=null,this.affine=new i.affine2d,this.inv_affine=new i.affine2d,this.lastStep=null,this.bounds={target:new s,actual:new s,vel:{ll:new e(0,0),ur:new e(0,0)}}}return t.prototype.setObjectBounds=function(t,i,n,s){return this.bounds.target.ll.x=t,this.bounds.target.ll.y=i,this.bounds.target.ur.x=n,this.bounds.target.ur.y=s},t.prototype.getPosRotScale=function(){return this.affine.toPosRotScale()},t.prototype.getPosRotScaleInv=function(){return this.inv_affine.toPosRotScale()},t.prototype.setCtxTransform=function(t){return this.affine.setCtxTransform(t)},t.prototype.applyToCtx=function(t){return this.affine.applyToCtx(t)},t.prototype.step=function(t){var i,n,s,e,r,o,h,u,a,c,l,f,p,m,v;for(c=t/1e3,this.lastStep=this.lastStep||c,a=Date.now(),n=0,s=!1;!s;)if(n++,e=this.step_dt,this.lastStep<c?this.lastStep+=e:s=!0,l=this.bounds.target,i=this.bounds.actual,r=(l.ll.x-i.ll.x)*this.spring_k-this.bounds.vel.ll.x*this.spring_damp,h=(l.ll.y-i.ll.y)*this.spring_k-this.bounds.vel.ll.y*this.spring_damp,o=(l.ur.x-i.ur.x)*this.spring_k-this.bounds.vel.ur.x*this.spring_damp,u=(l.ur.y-i.ur.y)*this.spring_k-this.bounds.vel.ur.y*this.spring_damp,this.bounds.vel.ll.x+=r*e,this.bounds.vel.ll.y+=h*e,this.bounds.vel.ur.x+=o*e,this.bounds.vel.ur.y+=u*e,i.ll.x+=this.bounds.vel.ll.x*e,i.ll.y+=this.bounds.vel.ll.y*e,i.ur.x+=this.bounds.vel.ur.x*e,i.ur.y+=this.bounds.vel.ur.y*e,this.canvas&&(this.width=this.canvas.width,this.height=this.canvas.height),p=i.ur.x-i.ll.x,f=i.ur.y-i.ll.y,m=this.width/p,v=this.height/f,this.drawScale=this.fill*Math.min(m,v),Date.now()-a>10){console.log("Bypassing smoothness for speed reasons after "+n+" steps"),this.instantZoom();break}return this._updateAffine()},t.prototype.worldPairToCanvasPair=function(t){return this.affine.transformPair(t[0],t[1])},t.prototype.canvasPairToWorldPair=function(t){return this.inv_affine.transformPair(t[0],t[1])},t.prototype.instantZoom=function(){return this.bounds.vel.ll.zero(),this.bounds.vel.ur.zero(),this.bounds.actual=this.bounds.target.copy(),this.lastStep=null,this._updateAffine()},t.prototype._updateAffine=function(){var t,n;return t=(this.bounds.actual.ll.x+this.bounds.actual.ur.x)/2,n=(this.bounds.actual.ll.y+this.bounds.actual.ur.y)/2,this.affine=new i.affine2d,this.affine.translate(this.width/2,this.height/2),this.affine.scale(this.drawScale,-this.drawScale),this.affine.translate(-t,-n),this.inv_affine=new i.affine2d,this.inv_affine.translate(t,n),this.inv_affine.scale(1/this.drawScale,-(1/this.drawScale)),this.inv_affine.translate(-this.width/2,-this.height/2)},t}(),n.zoomCanvas=r}.call(this)},{"./vec.iced":4,"./rect.iced":3,affine:5}],5:[function(t,i,n){!function(){n.affine=t("./lib/affine"),n.polygon=t("./lib/polygon")}.call(this)},{"./lib/affine":6,"./lib/polygon":7}],6:[function(t,i,n){!function(){var t,i,s,e,r,o,h,u,a,c=[].slice,l={}.hasOwnProperty,f=function(t,i){function n(){this.constructor=t}for(var s in i)l.call(i,s)&&(t[s]=i[s]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};n.compose=function(t,i){var n;return n=i.copy(),n.rightComposeWith(t),n},t=function(){function t(){var t;t=1<=arguments.length?c.call(arguments,0):[],0===t.length?(this.m00=1,this.m01=0,this.m10=0,this.m11=1,this.v0=0,this.v1=0):1===t.length?(this.m00=t[0].m00,this.m01=t[0].m01,this.m10=t[0].m10,this.m11=t[0].m11,this.v0=t[0].v0,this.v1=t[0].v1):(this.m00=t[0],this.m01=t[1],this.m10=t[2],this.m11=t[3],this.v0=t[4],this.v1=t[5])}return t.prototype.oneLineSummary=function(){return"M = ["+this.m00.toPrecision(3)+(" "+this.m01.toPrecision(3))+(" "+this.m10.toPrecision(3))+(" "+this.m11.toPrecision(3)+"]   V = (")+(""+this.v0.toPrecision(3)+", ")+(" "+this.v1.toPrecision(3)+")   scale = ")+this.getXScale().toPrecision(3)+" x "+this.getYScale().toPrecision(3)},t.prototype.copy=function(){return new t(this)},t.prototype.setCtxTransform=function(t){return t.setTransform(this.m00,this.m10,this.m01,this.m11,this.v0,this.v1)},t.prototype.applyToCtx=function(t){return t.transform(this.m00,this.m10,this.m01,this.m11,this.v0,this.v1)},t.prototype.transformPair=function(t,i){var n,s;return n=this.m00*t+this.m01*i+this.v0,s=this.m10*t+this.m11*i+this.v1,[n,s]},t.prototype.transformVec=function(t){var i,n;return i=this.m00*t[0]+this.m01*t[1]+this.v0,n=this.m10*t[0]+this.m11*t[1]+this.v1,t[0]=i,t[1]=n},t.prototype.rightComposeWith=function(t){var i,n,s,e,r,o;return s=t.m00*this.m10+t.m10*this.m11,e=t.m01*this.m10+t.m11*this.m11,o=t.v0*this.m10+t.v1*this.m11+this.v1,i=t.m00*this.m00+t.m10*this.m01,n=t.m01*this.m00+t.m11*this.m01,r=t.v0*this.m00+t.v1*this.m01+this.v0,this.m00=i,this.m01=n,this.m10=s,this.m11=e,this.v0=r,this.v1=o},t.prototype.leftComposeWith=function(t){var i,n,s,e,r,o;return s=this.m00*t.m10+this.m10*t.m11,e=this.m01*t.m10+this.m11*t.m11,o=this.v0*t.m10+this.v1*t.m11+t.v1,i=this.m00*t.m00+this.m10*t.m01,n=this.m01*t.m00+this.m11*t.m01,r=this.v0*t.m00+this.v1*t.m01+t.v0,this.m00=i,this.m01=n,this.m10=s,this.m11=e,this.v0=r,this.v1=o},t.prototype.deconstruct=function(){var t,i,n,s,e,r;return i=Math.sqrt(this.m00*this.m00+this.m10*this.m10),s=(this.m00*this.m11-this.m10*this.m01)/i,e=(this.m00*this.m01+this.m10*this.m11)/(this.m00*this.m11-this.m10*this.m01),t=Math.atan2(this.m10,this.m00),n=this.v0,r=this.v1,[i,s,e,t,n,r]},t.prototype.toPosRotScale=function(){var t;return t=Math.sqrt(this.m00*this.m00+this.m10*this.m10),{pos:[this.v0,this.v1],rot:Math.atan2(this.m10,this.m00),scale:[t,(this.m00*this.m11-this.m10*this.m01)/t]}},t.prototype.getXCenter=function(){return this.v0},t.prototype.getYCenter=function(){return this.v1},t.prototype.scale=function(t,i){return null==i&&(i=t),this.rightComposeWith(new u(t,i))},t.prototype.rotate=function(t){return this.rightComposeWith(new h(t))},t.prototype.translate=function(t,i){return this.rightComposeWith(new a(t,i))},t.prototype.flipX=function(){return this.rightComposeWith(new i)},t.prototype.flipY=function(){return this.rightComposeWith(new s)},t.prototype.reflect=function(t,i){return null!=i?this.rightComposeWith(new o(t,i)):this.rightComposeWith(new r(t))},t}(),h=function(t){function i(t){i.__super__.constructor.call(this,Math.cos(t),-Math.sin(t),Math.sin(t),Math.cos(t),0,0)}return f(i,t),i}(t),u=function(t){function i(t,n){i.__super__.constructor.call(this,t,0,0,n,0,0)}return f(i,t),i}(t),a=function(t){function i(t,n){i.__super__.constructor.call(this,1,0,0,1,t,n)}return f(i,t),i}(t),o=function(t){function i(t,n){i.__super__.constructor.call(this,2*t*t-1,2*t*n,2*t*n,2*n*n-1,0,0)}return f(i,t),i}(t),r=function(t){function i(t){i.__super__.constructor.call(this,Math.cos(t,Math.sin(t)))}return f(i,t),i}(o),i=function(t){function i(){i.__super__.constructor.call(this,-1,0,0,1,0,0)}return f(i,t),i}(t),s=function(t){function i(){i.__super__.constructor.call(this,1,0,0,-1,0,0)}return f(i,t),i}(t),e=function(t){function i(t){var n,s,e;n=t.pos,s=t.rot,e=t.scale,i.__super__.constructor.call(this),this.translate(n[0],n[1]),this.rotate(s),"number"==typeof e?this.scale(e):1===e.length?this.scale(e[0]):this.scale(e[0],e[1])}return f(i,t),i}(t),n.affine2d=t,n.rotation=h,n.scaling=u,n.translation=a,n.reflectionUnit=o,n.reflection=r,n.flipX=i,n.flipY=s,n.posRotScale=e}.call(this)},{}],7:[function(t,i,n){!function(){var i,s;i=t("./affine"),s=function(){function t(t){this.vertices=null!=t?t:[]}return t.prototype.copy=function(){var i,n,s,e,r;for(i=[],r=this.vertices,s=0,e=r.length;e>s;s++)n=r[s],i.push(n.copy());return new t(i)},t.prototype.addVertex=function(t){return this.vertices.push(t)},t.prototype.transform=function(t){var i,n,s,e,r;for(e=this.vertices,r=[],n=0,s=e.length;s>n;n++)i=e[n],r.push(t.transformVec(i));return r},t.prototype.getBoundingRectangle=function(){var t,i,n,s,e,r;for(n=null,r=this.vertices,t=s=0,e=r.length;e>s;t=++s)i=r[t],0===t?n=[[i[0],i[1]],[i[0],i[1]]]:(i[0]<n[0][0]&&(n[0][0]=i[0]),i[0]>n[1][0]&&(n[1][0]=i[0]),i[1]<n[0][1]&&(n[0][1]=i[1]),i[1]>n[1][1]&&(n[1][1]=i[1]));return n},t}(),n.polygon=s,n.factory={unitSquare:function(){return new s([[.5,.5],[-.5,.5],[-.5,-.5],[.5,-.5]])},unitCircleApprox:function(t){var i,n,e,r,o;for(e=2*Math.PI/t,r=0,n=new s,i=o=0;t>=0?t>o:o>t;i=t>=0?++o:--o)r+=e,n.addVertex([.5*Math.cos(r),.5*Math.sin(r)]);return n}}}.call(this)},{"./affine":6}]},{},[]);